(function(e){function t(t){for(var o,a,r=t[0],l=t[1],c=t[2],d=0,p=[];d<r.length;d++)a=r[d],i[a]&&p.push(i[a][0]),i[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(o=!1)}o&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={app:0},s=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2856:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var o=n("8a03"),i=n.n(o),s=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[e.accessToken?e._e():n("div",{staticClass:"columns has-text-light"},[n("div",{staticClass:"column is-8-desktop is-12-tablet has-text-centered has-background-dark"},[n("h2",{staticClass:"is-size-2"},[e._v("Dropbox Music Player")]),n("p",{staticClass:"is-size-5 has-text-weight-normal",attrs:{id:"welcome-p"}},[e._v("\n            Play audio from your Dropbox. DBXMP will find all your audio files and compile them in a single playlist for easy use and listening!\n          ")]),n("a",{staticClass:"button is-primary is-medium is-fullwidth",attrs:{href:e.authUrl,id:"start-btn"}},[e._v("Start")])])]),e.accessToken?n("div",{staticClass:"columns has-text-light"},[n("div",{staticClass:"column is-8-desktop is-12-tablet has-text-centered has-background-dark"},[n("h3",{staticClass:"is-size-6"},[e._v("Now Playing")]),n("h3",{staticClass:"is-size-5",attrs:{id:"current-song-audio__title"}},[e._v(e._s(e.currentSong.title))]),n("div",{staticClass:"current-song__prev",on:{click:function(t){e.playSong(e.currentSong,"prev")}}},[n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:"No song."!=e.currentSong.title,expression:"currentSong.title != 'No song.'"}],staticClass:"next-button__icon",attrs:{icon:"step-backward"}})],1),n("div",{staticClass:"current-song__next",on:{click:function(t){e.playSong(e.currentSong,"next")}}},[n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:"No song."!=e.currentSong.title,expression:"currentSong.title != 'No song.'"}],staticClass:"next-button__icon",attrs:{icon:"step-forward"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"No song."!=e.currentSong.title,expression:"currentSong.title != 'No song.'"}],attrs:{id:"current-song-audio__container"}},[n("audio",{ref:"audio",attrs:{id:"current-song-audio__audio",autoplay:"",volume:"0.2"}},[n("source",{attrs:{src:e.currentSong.link}})]),n("controls",{attrs:{audio:e.$refs.audio}})],1),n("div",{staticClass:"playlist__container"},[e._l(e.newPlaylist,function(t){return n("div",{staticClass:"box",attrs:{"data-index":t.id},on:{click:function(n){e.playSong(t)}}},[n("p",[e._v(e._s(t.title))])])}),n("div",{directives:[{name:"show",rawName:"v-show",value:!Object.keys(this.newPlaylist).length,expression:"!Object.keys(this.newPlaylist).length"}],staticClass:"playlist-spinner"},[n("font-awesome-icon",{attrs:{icon:"spinner"}})],1)],2)])]):e._e()])])])},r=[],l=(n("b54a"),n("456d"),n("6762"),n("7f7f"),n("ac6a"),n("14b9"),n("5abe"),n("5919"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"columns is-mobile",attrs:{id:"controls__container"}},[n("div",{staticClass:"column is-1",attrs:{id:"play-button"},on:{click:e.togglePlay}},[n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:!e.isPlay,expression:"!isPlay"}],staticClass:"play-button__icon",attrs:{icon:"play"}}),n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:e.isPlay,expression:"isPlay"}],staticClass:"play-button__icon",attrs:{icon:"pause"}})],1),n("div",{staticClass:"column is-1",attrs:{id:"shuffle-button"},on:{click:function(t){e.toggleShuffle(t)}}},[n("font-awesome-icon",{staticClass:"play-button__icon",attrs:{icon:"random"}})],1),n("div",{staticClass:"column is-1",attrs:{id:"repeat-button"},on:{click:function(t){e.toggleRepeat(t)}}},[n("font-awesome-icon",{staticClass:"play-button__icon",attrs:{icon:"retweet"}})],1),n("div",{staticClass:"column is-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.volume,expression:"volume"}],attrs:{type:"range",id:"volume",min:"0",max:"1",step:"0.01",value:"0.5"},domProps:{value:e.volume},on:{change:e.volumeChange,__r:function(t){e.volume=t.target.value}}})]),n("div",{staticClass:"column is-5"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.seeker,expression:"seeker"}],attrs:{type:"range",id:"seeker",min:"0",max:"1",step:"0.01",value:"0.0"},domProps:{value:e.seeker},on:{change:e.seek,__r:function(t){e.seeker=t.target.value}}})]),n("div",{staticClass:"column is-2",attrs:{id:"time"}},[n("span",[e._v(e._s(e.time.elapsed))]),e._v(" / "),n("span",[e._v(e._s(e.time.duration))])])])}),c=[],u=(n("6b54"),n("28a5"),{name:"Controls",props:["audio"],data:function(){return{volume:.5,seeker:0,time:{elapsed:"0:00",duration:"0:00"},elapsedTimer:null,seekerTimer:null,isPlay:!1}},mounted:function(){var e=this;this.$root.$on("playSong",function(){e.stopElapsedTimer(),e.stopSeekTimer(),e.audio.volume=e.volume,e.setDurationTime(),e.runElapsedTimer(),e.runSeekTimer(),e.isPlay=!0}),this.$root.$on("pauseSong",function(){e.stopElapsedTimer(),e.stopSeekTimer(),e.isPlay=!1})},methods:{toggleRepeat:function(e){this.$root.$emit("repeatPlayer",e.target)},toggleShuffle:function(e){this.$root.$emit("shufflePlayer",e.target)},togglePlay:function(){this.audio.paused?(this.audio.play(),this.runElapsedTimer(),this.runSeekTimer()):(this.audio.pause(),this.stopElapsedTimer(),this.stopSeekTimer())},volumeChange:function(){this.audio.volume=this.volume},seek:function(){this.audio.currentTime=this.seeker*this.audio.duration},setDurationTime:function(){var e=this.getMinute(this.audio.duration),t=this.getSeconds(this.audio.duration);(isNaN(e)||isNaN(t))&&(e="0",t="00"),this.time.duration=e+":"+t},runElapsedTimer:function(){var e=this,t=0,n=0;this.elapsedTimer=setInterval(function(){n=e.getSeconds(e.audio.currentTime),t=e.getMinute(e.audio.currentTime),e.time.elapsed=t+":"+n,e.audio.currentTime>=e.audio.duration&&(e.time.elapsed="0:00")},1e3)},stopElapsedTimer:function(){clearInterval(this.elapsedTimer)},runSeekTimer:function(){var e=this;this.seekerTimer=setInterval(function(){e.seeker=e.audio.currentTime/e.audio.duration},1e3)},stopSeekTimer:function(){clearInterval(this.seekerTimer)},getMinute:function(e){var t=e/60;return t=parseInt(t.toString().split(".")[0]),t},getSeconds:function(e){var t=Math.floor(e%60);return t<10&&(t="0"+t.toString()),t}}}),d=u,p=(n("c386"),n("2877")),f=Object(p["a"])(d,l,c,!1,null,null,null);f.options.__file="Controls.vue";var h=f.exports,m=n("14ca").Dropbox,v={components:{Controls:h},data:function(){return{accessToken:"",oldPlaylist:[],newPlaylist:[],queue:[],currentSong:{id:null,title:"No song.",link:""},playerOptions:{loop:!1,shuffle:!1,repeat:!1},audio:null,authUrl:""}},watch:{"currentSong.id":function(e,t){var n=document.querySelector('[data-index="'+t+'"]'),o=document.querySelector('[data-index="'+e+'"]'),i=document.querySelector(".playlist__container");o.classList.add("box-now-playing"),i.scrollTo({top:o.offsetTop-100,behavior:"instant"}),n&&n.classList.remove("box-now-playing")}},created:function(){document.title="Dropbox Music Player";var e=new m({clientId:"exzcryujcx4jgpu"});this.getAccessTokenFromUrl()?(this.accessToken=this.getAccessTokenFromUrl(),this.filesListFolder()):this.authUrl=e.getAuthenticationUrl("https://jonasbros.github.io/dbxmp")},mounted:function(){var e=this;this.$refs.audio.onplay=function(){e.$root.$emit("playSong")},this.$refs.audio.onpause=function(){e.$root.$emit("pauseSong")},this.$root.$on("shufflePlayer",function(t){e.playerOptions.shuffle=!e.playerOptions.shuffle,e.playerOptions.shuffle?t.closest("#shuffle-button").style.color="grey":t.closest("#shuffle-button").style.color="#FFF"}),this.$root.$on("repeatPlayer",function(t){e.playerOptions.repeat=!e.playerOptions.repeat,e.playerOptions.repeat?t.closest("#repeat-button").style.color="grey":t.closest("#repeat-button").style.color="#FFF"})},methods:{getAccessTokenFromUrl:function(){var e=14,t=window.location.hash.indexOf("&token_type")-14;return window.location.hash.substr(e,t)},filesListFolder:function(){var e=this,t=new m({accessToken:this.accessToken});t.filesListFolder({path:"",recursive:!0}).then(function(t){e.saveAudioToPlayList(t.entries)}).catch(function(e){console.log(e)})},saveAudioToPlayList:function(e){var t=this;this.oldPlaylist=e.filter(function(e){return"file"==e[".tag"]}),this.oldPlaylist=this.oldPlaylist.filter(function(e){var t=["aac","mp3","wav","flac","alac","oog","m4a","wma","m4r","aiff","pcm"],n=e.name.substring(e.name.lastIndexOf(".")+1,e.name.length);if(t.includes(n))return!0}),this.oldPlaylist.forEach(function(e){t.lookForFileLink(e.path_lower)})},lookForFileLink:function(e){var t=this,n=new m({accessToken:this.accessToken});return n.filesGetTemporaryLink({path:e}).then(function(e){var n={id:Object.keys(t.newPlaylist).length,title:e.metadata.name,link:e.link};t.newPlaylist.push(n)}).catch(function(e){console.log(e)})},playSong:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("prev"==n?e=this.newPlaylist[e.id-1]:"next"==n&&(e=this.newPlaylist[e.id+1]),n){if(this.playerOptions.shuffle){var o=this.newPlaylist.length,i=Math.floor(Math.random()*o);e=this.newPlaylist[i]}this.playerOptions.repeat&&"prev"!=n&&(e=this.newPlaylist[this.currentSong.id])}document.title=e.title,this.currentSong.link=null,this.currentSong.id=e.id,this.currentSong.title=e.title,this.$refs.audio.src=e.link,console.log(e),this.$root.$emit("playSong"),this.$refs.audio.onended=function(){t.$root.$emit("pauseSong"),t.playSong(t.currentSong,"next")}}}},g=v,y=(n("5c0b"),Object(p["a"])(g,a,r,!1,null,null,null));y.options.__file="App.vue";var w=y.exports,b=n("8c4f");s["default"].use(b["a"]);var k=new b["a"]({mode:"history",base:"/",routes:[]}),_=n("2f62");s["default"].use(_["a"]);var S=new _["a"].Store({state:{},mutations:{},actions:{}}),T=n("9483");Object(T["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var x=n("ecee"),P=n("c074"),C=n("7a55");x["library"].add(P["b"],P["c"],P["e"],P["a"],P["f"],P["g"],P["d"]),s["default"].component("font-awesome-icon",C["FontAwesomeIcon"]),s["default"].use(i.a),s["default"].config.productionTip=!1,new s["default"]({router:k,store:S,render:function(e){return e(w)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var o=n("2856"),i=n.n(o);i.a},9635:function(e,t,n){},c386:function(e,t,n){"use strict";var o=n("9635"),i=n.n(o);i.a}});
//# sourceMappingURL=app.05556f85.js.map
